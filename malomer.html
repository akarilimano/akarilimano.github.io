<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" class="dj_webkit dj_chrome dj_contentbox"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

<meta property="og:type" content="game" />
<meta property="og:image" content="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAVsAAAE4CAIAAAB6zcdOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAC6xSURBVHhe7d2HW1Nn+8DxZjBCyN6DQCAkBAIEwt577z1lrzAzFBdLQJGN2retdWu1Wgf+/sLfHQ6iPVoTkZFxX9fn6vW275OT1iTfPM/JGb9cvPN/CCHXWbbfddl2tMbCgEDRL78Ec4XhKQVtE7de2nf3SSM9ERYBoR8zsviooNEcwBBTqGy/AGFUQlHb1G3SGM+FRUDoB9h29xuGF0N1aTA7ABKlobTNQhrj0bAICP2AC5fuGLPr6f58ogim3Kbe2XukMR4Ni4CQqyybb/MbxsSKGGgBLBlCIlPqhxamN96Qhnk0LAJCLrHv7rdPr0fG5fsHiqg0DpOtLGwcH1l8RBrm6bAICDln2/1gXn2emNvE5ofBBCEwSKKJze2/+j/bzgfSSE+HRUDIucm1V3WD8yxeqGO9QGELZVE1fVen1v8mDfMCWASEnBucux+bVhXAkEAROHx1Un7L9MYb+95H0jAvgEVAyImZzX+azSsQAiqNC0UIi8poGlshjfEaWASEnBhZfJhXN0KlsiEHDKYsuaBtfPUFaYzXwCIg5ETHzIY+qRRyAGRhxvIuO2mAN8EiIPQ99r39qp7LAqmOKIIhtbLDskka402wCAh9z9D8n8mFrTS6Yw8Cnc6D5cP46nPSGG+CRUDoexpHljSxuZADCoUtU8U3DC9ad96TxngTLAJC/8m28yG3ZohYMlBpnITsBi87i+FrWASEvs2+93HsxpOYlHK/ACGFwgpgSCq6L5q9eskAsAgIfZttd792YE4eluDYg+DHFytiBq//4ZVHJX0Ji4DQt1m336cUdXAE4VAEJluZmNtoXnlGGuN9sAgIfYN9d3/85gulJtnPXwBF4Eu0tf3Xptdfk4Z5HywCQt9g2Xrbe/keVxgBOaDRuarIlJHFh953puPXsAgIfcPk7Vf1w4vsg5MdGUxZTEoFaYC3wiIg9A3mlWeFTRNMthKKADOF1OJO0gBvhUVA6BuGFx8mF7bB7ACKIAmJLWqeIA3wVlgEhL5h4NrvWmOh/8EdGVTa1LrBedIAb4VFQOgbei7dkSgNdD8eFCEyPr/bvkMa4K2wCAiRERdZZTClFCqbQmHFplWOLT8ljfFWWASEyKY33tQOXIfZAaDRuSmFbV5/qOIRLAJCZDAjKGqeJIrA5oXl1g6TBngxLAJCZP1Xf0sr7iSKIAuNL++0kQZ4MSwCQmQdls2YlHKiCBpDTsPIEmmAF8MiIETWOLKkikwhihCXXtNl3SYN8GJYBITIKrovcoWOUx5Bemn30MKfpAFeDIuA0L9Ytt7l1Q7TDm7NAEpaZyxbb0ljvBgWAaF/GZy7b8ptghZQKCwWJ6R2YM53fnoEWASE/qXZvKqNz3cUgcoOiUhqnbxFGuDdsAgI/Utpu0UeZoQiUGmc2LSqC5fukAZ4NywCQv+SWd5D3BKeRufm1AwNLzwgDfBuWASEPpvZ/MeQWkGnO05wovvx6gbmJtdekcZ4NywCQofsex/7rvwaHp1FobBgyQAzhZ5Ld3zhSmpfwiIgdOjLy7H7B4pU2tSRxYekMV4Pi4CQA0wQYMmQUXaBJ9JAERyXY8/xicuxk2AREHKwbr8fWnigCE+k+/N/obD44siKLvvU7b9Jw7weFgEhh7HlZwWNZhZXRaGwAoMkusSiibWX9t190jCvh0VA6P9sux8u2PdCdWnE/VrESgPUwacOVTyCRUDIcYmU0rYZ4jJqfgGCmOTyCxd968CkI1gE5PP2PrZPr+tNJTA7AAKprqBx3OpjPzoewSIgX2fdfgcTBA7PcZwihcKKTi5rm14njfEdWATk6zosm4aUCiqN8wuFxWQpS9qmJ9deksb4DiwC8nWFTeNiRQxMEKhUdmR8PqwgbL73E8MRLALyXfa9/QsX96ISiwMYYgqVHRgkLW6ZGr3xhDTMp2ARkI+y7XwYW36alN/CEahhguAfKArRJPXM3rNuvyeN9ClYBOSjxlefl3XagjkhxA5Fvlhb1m7xtTMdv4ZFQL5oeuNN8/iqLDSe7seHInCF4cmFbZADHzxIkQSLgHxRt303IbveP0AIs4MAhjg6uaxjZpM0xjdhEZDPGV54mFMzSJzjCJQRSeWddpg1kIb5JiwC8i3wyS9tm1GEm4jdB0yWIrtqYGjeh+7I8H1YBORDbLv7sDoI1aVDC6AINDovPrO2Z/YuaZgvwyIgX2Hf259cewUJYHFVkAP/AKEy3NRl3bZs+tANWpzCIiCfYN/7OLL0OKd6kC+OhKkB8XNjSev05C3fPWD5m7AIyPvZd/cHrv9R0GAWyfSQA5ggsHihMFkYXnxo2/Hp45G+hkVAXs62uz80/2de3YhQrocWAAZTFp1U1jrhWzdrchEWAXkzWCxM3Prr4HqqkUQOqFSO3lTSgjn4D1gE5LUcZy6sPEsuaBVIdDS6417PVBrHkFrRNrU2g0cf/AcsAvJOlq13PbP3Uora+eJIup9j30EQSw45aJ++7YNXWHYdFgF5Icvm2y7bdlpJF4evdlwK5ZdgFjf0IAfrM/hb43dhEZC3gdlBt30XZgfsgwulASZLYUitbJvy3WuluQ6LgLyKbefDwLXfjZm1xGnOgErlxGfWdtl2SCPRN2ERkPeYuv13s3lVZyxkcVXEYoFG45rymyEHli1cLLgEi4C8xPDCw5K2mRBNclCwnMgBTBMScxu77Dt4XqPrsAjI41l33vfO3sutHSbOaAR+/gKhXA856Ll0x7L1jjQefQcWAXkw++4+rBQuXNxLKWwXSHQHOXBcAQXSkFM90H/1N9J45BQWAXkq+97HybWXzeOrETHZDKbMkQMKi0bnqfWZdYPzeMXE48EiIE81NP9nQcOYSK6HSQGVyoYiMNlKY1YdTBmm1l/jFROPB4uAPFKndSu1qEMkj6bSuAdTA64kxJBRdqHn0l3ccfAzsAjIk9h292Gl0DJxMyG7nrhQIoXCgiVDmC49v34Udxz8PCwC8hgzm/8Mzt2v7b8eYcgJCpZDDqg0DqwUdMbCmr5r5pVnpPHoGLAIyAPY9z7C7ODCxb3UonYWN5Q43ABmB8EclTGrbuD6H1a88MkJwSIgdwc5GJz7o7BpXB2d+enoI8d1U8VKQ17dyNjyU8d92fY+kh6FjgeLgNwXtGD85gtYJhhSK8TKmMAgCTE1YHFCtPH5pe0zQ/MPSA9BPwmLgNwUtKDTulXQOK7WZzju3XxwPXX/AKEszJhW3Nk0tmxeeUp6CPp5WATkXmBeYN1+N7r0uLr3iiG1krhxM6D78YO5qrCo9NJ2i3n1OR5ucEqwCMid7H20bL0dnLufVtJ1dBc2QKGyRfLo9NKunkt3yA9BJwqLgNwItKCoeUKlTQ3mhBBXRoTFgl+AMCalvGn0hnnlOZ7UfNqwCOj8wUphbPlp3eB8Yk6DWBFD3LIZchAULA/VpWVXDXRYNqdu43kKZwGLgM6TbefD+OqL9un17Kr+8JisYI7j/muATucJpVHxGbU1fddGlh7DMNID0SnBIqBzA1/7fZd/rey+FJVYHBgkJeYFVBoniKWQqxNgatA7e4/0EHTasAjoHBwcg/ihYXgxOqkUPv/EvABAFII5IXEZ1Y5lwvpr0qPQGcAioLM2ufYSWpCQVSdWGgKDJFSq45BkEMxWRsbllbbNjN54PLP5j30Pf188B1gEdHbGlp81m1czyi4oI5JYXBVxU1YqjctkKzWxuQUNY+1T66M3npAehc4SFgGdOtvOe/PKc1gI5NWOaOMLuMIIYlJAo3PZvNAwfUZaaXfD8NLY8lNYTZAei84YFgGdIuv2u/GbL3ou3Slrt0QnlcK8gGgBhcoOYsmlqriE7Pr64UXHJY+wBe4Bi4BOx95H++7+4Nz90nZLeHQWEQIHCotK4wQGSeMza1smbuLVEN0NFgGdvJnNf3ov38uvHw3TpcO8wD9QdDg1oLD4Ym1idkPD8MLwwoPpjTd4eoK7wSKgkzRx86+OmY28upEIQ45Ipj9swcElkuVhCbBGKO+098zenbr9Cn9KcE9YBHQCHPsOV593WjYLGsaik8uEMv3hpIDKZrKVCnWiIbWyrMPac+kO3qndzWER0E+BBYJ55dmFi3ulX+47PNhZEMRSiOTR0ILK7kvDCw/xSGSPgEVAx2Q/2HcILcirHQ7VphKTAiIHNDo3mBNizKprHluGdQTpgcidYRHQD4MQjC0/rem7mpjTKA8zwoffP0BI5MDv0zWOWsZvDi8+nF5/bdvFqYEnwSIgV8GkYOKWY8dhcfNkfEaNXJ3A4oXS/YjjDjlMtiIsKiO9tLtucK7/6m8zG2/wEANPhEVAzsHHe2juPnzt59WNxKSUS0JiAxhiYlLgHyjiiyPDY7LTSjpr+68Pzt3Hi5p4NCwC+k/wJT+59mp44WHz+Gp2VV94dFZgkIRCcdxhkUplQxQ4fDX8w8yKXojFwblJOCnweFgE9C17H+HjDd/2dYPz8Zm1MAsgZgQOFBaFwgoKlmkMOSWt0yOLj8iPRZ4Mi4DIptdfd9l28utGtfH50AIGU0acpEgQKaKN2fVVPZeHFx5M3PoLb6bkZbAI6JB1+x0sEOqHFjLKuiPj8oQyfSDjcI3gODHp4JKHyfkt1T1Xei7dHb/5gvRw5B2wCOj/4Ku+Z/ZuTd+1lML2iJhsNj+MuA4y8PMX8EQatT4zuaAVBgxc+31m8x/Sw5E3wSL4Lpjww1f94Nz96r6rprwmqSqeqACg0jgBDAlHEA7zgvTS7mbzCk4KfAQWwScdXOZwZOlRSeuUJjY3iOW48/onjh2HwZwQTWyeY8fh0mPcU+BTsAi+hTjKqGlsOa2kC77/WdzQAIb46EqHVCpbGhqflNdcNzh3tOMQf1P0KVgEXzG1/nfv7N3K7kuJOY3QAq4wwu/ToccQAg5fHWHIgUzUDy30Xr43ufaS9HDkI7AI3gy+3q3b74fmH7RN3YYlgDGrThmRFBgkhQQQIYAJgkgeHRmXl1He0zC8OLTwAM9Q9HFYBO9k3X4Hc/6huT/bZzZyaoYi4/PZ/DBiRgDofrygYLlQFgX/PL9hrMu2g5ctQAQsgreBeQEYnPujossek1LO5oUe7SZwODjikC/RxmfU1A3OOa5rhrsJ0BewCN7DtvthbPlp7cBcSlF7iCYJJgWwQKDRuL/84rh7GoC/DY/OzKroa5tcG1l6DPMCvLQZIsEieDz4kh+98aR14mZhoxm++ZXhJo4gnO7PJyoAMwImSwH/EP4vGAAtGJy7j0cZof+CRfBU9t39iZt/9Vy6Uz+0kFneE5VQJJJHB3y66jEIYIiFMn14dFZacWdl96Vu+y7+goCcwiJ4GAgBLP5hddB7+V5Vz+XEnEZZmJG4bMnBjIDt5y9gspV8caQmNje3drht6jZesAC5DovgUfY+wuK/Y2YdJgWwEAgMkhzNCBwoLP8AoURpSClscxx3vPqc/HCEnMEieIaZzbed1q2CRrPeVMITa2AW4BcgJA4rIMCSIS6jpqzDNnDtd5hB4AUO0fFgEdza5NqrC5fuVF6YTS3qgFWASBEdFPz5HASYEfDF2si4vLSSzureK90Xd80rz0hbQOiHYBHcjn1vf2bzn8Hrf7RO3ipqnozPrA3RJDNZioPfER0hoFDZbF6YXJ0Ym1pZUD/WNLY8svgQdxagE4FFcCPwqR5ffdF/7fdm80pmRW94TPbRzZQBjc4LZEo5ArVUFWfKa6q6cHlw7k/SFhD6SVgEN9J3+VeYFGjj8xlMGUwEjlpA4Aoj9EmlpR3Wwfk/8ewDdEqwCOcMFggwKajoupiQ3UDcAeHL05NhpcDmh2mNBbm1Q21Tt4cXHzrOUN5+dxEPPUanA4twPuy7+4PX/6gfWsiq7ItKLJaFGmGBQP90gVMKhc0RhBPXMivrsHXMbAwvPLBs4p4CdOqwCGdqZuPN8MLDDstmTd9V4qKGsBY42mVIo/OCOSpZaLw2viC7qr9ugLg5Eh5xjM4OFuHU2Q9ufDB+88XQ/INm82pe3YjeVMIXa6mfQgBrhMAgCZsXpgg3GbPqyjttvZd/tW7jtczQOcAinDqYFxzsMpzQJRQy2UqiAl8KCpZrjQVFzZP9137HEKDzhUU4Ldad953WbQiBIbVCqopj80JhIkClHe4ypFDYLF6oxpCbVdnXOLIE0weYRFi23uHVCtD5wiKcMPPKs07LJsz8U4s7Igw5YqWByVJ8EQLHZY5DtWmJOQ0VXRfbpm4Pzt2fXn9N2ghC5wWLcALsu/tTt//uu/K/prHl3NohQ0q5XJ3ACJYfHVNAo3GhC5KQWE1sblpxZ03f1d7Ze7hAQG4Ii/BTYJ4Ps/3+a781DC+mFLYrNUlfno8IRfAPFLG4KmlIXGxaZXHLVPfFPbyiIXJnWITjs+3u91/5rbBpAlYHQSzFUQgOUViQA7U+I7d2uNu2S3osQu4Ji3AcI4uPYOZvymuGhcDhUYaf9hQAJlsZpkuH1UH98AIsJcyrz/EqZshTYBFcZdt5b1551ja55jgfMaNGEW5i88O+uBsSh8GUKcITY9OrChrNLeM3+6/+BgsEmEeQtoOQO8MiOGHf+wghuHBxr25gLruqX28qESmiYVJwNCOAEIjk+ghDdnJBa3mXvcu2M3HrL9JGEPIUWIRvs+68n1x7NbL0uGf2XlmH1ZhZK1XFHS0NqFS2f4AwmBPCF0dGJRbn14+2z2zA0gCPJkCeDovwbaNLj2v75xJyGoQy/dH9EY8EBkmVEUmZ5T3t0+sQDtJjEfJcWITPrNvvYVJQO3A9rbhDrc/gCiOCguV0Pz6FcngHFDqdpww3JeW31PRd7b/6m+NyhhtvcE8B8iZYBAf4bLdN3S5sGjekVoRokqAFsCg4mhFAF2Sh8YaU8pzqwcaRJcetk2+9xCsUIK/ku0WANT98w/df+71lfDW3dkifVCpWxMAsgJgREPdNFkh1obq0pPzmsnZLx8zG+M0XdpwRIK/mi0WA1YHjvsnzfzaPr6aVdqm0qQym9HBGQGE57oDCUghlUZrYXJgUtE7cmoAZwVcbQcgr+VwR4Et+ePFhWYc1KqGIxQ09DMEnVBoHFgipxR0wcXAsDb56OELezYeKMLb8tHH0RnpplzIiiSsMDwySfL7eOYXNE2liksuLW6Z6Lt0ZvfHk4A4ouEBAPsf7iwBrhO6LexVdF015TbBAgE8+jc6D1QGEAIrgODdZl27Kay7rsHVZt8duPMEQIF/mtUWAD7Z55Rl8yKsuzBqz6hThiV/eDSkwSCqU6TWxueml3TV91/qv/ja98Ya0BYR8kLcVwb73ESYF4zdf9F35tbzLHpNSzhWEHx1rSKNzGUwZ/BNtfH5u7XDHzCZepAChL3lbEazb74YWHhQ0mEOJXxA+HVwEKFQ2h682ZtXWDc6bV5/jEccIfc17ijBx66+WiVvpZd0hmmT45PsHiohbJ1MoLCZbqTHk5tYMtUzcHFl8NHX7Fd4TCaFv8vgiWLbeDS88qB+cTy1qD4/O4okjj447DmRIJEoDLByKmydbJ24NzT/A6xQg9H0eXITpjTfEbZHSijuhBcGckE+TAjaLq5KHJcSlVxe3THXMbE6vv7bv4S8ICDnneUWA9b9l6+3YyjNYI2RW9Cojkg53ExCHG7KVQpnemFVf1XN5aOEB6bEIoe/zvCLAzL9n9m56WbdAqv3yWmY0P54sLAEa0WXbhqUEnomE0DF4UhEm1161TtxKLe6UquKDuSq6n+O+qRCFIJYiOqm0pHW607o1tvwUr1yC0LF5QBFsOx/Gb/7VbF7NKOuJMOTwhBpiakChsrnC8KjE4oJGc8fMBrTAcRv1rx6OEHKduxdh/OaL9un1ggazzljI4auJMxEOWhARps/IKLvQMn5z8tZL3HGI0Ilw0yI4Ll6w/npk6VF131W9qSTo0/2RYKUQxJILZfqUoo6D85TxGqcInSQ3LQLM/5vGVgyplRyB+uiiZkAg1SUXtnVYtixbb3HfIUInzu2KQBx6mFLYJlJEM5gyGt2xTKDSOGKlIbmgtXFkaXTp8czGG9x3iNBpcKMiwLyg07qVXTUQHp3lOD3p4OYofgECgTQqNq2quvdq7+Vf8aaJCJ0qtygCtGBk8VH90Hx8Zi1foqVQDg49pLKhC5FxjpMUOy1b+DsCQmfg/Isws/lP7+V7BQ1j8jCjf6CIWCPAekEoi4K1Q/v0+szmW9JDEEKn5PyL0GnZjE2rdPyU8GkPYjAnJD6jpm3q9uTaK9xfgNBZOrci2Hf3R288KW6ZCo/JYgTLiBYwmFJYJlR02YcXHk5vvMFLoSN0xs6nCFPrr9tnNpILWmGlEBgkcawUqByBNCopv6Vx9IZ55RlpPELobJxDESbXXjabVw2plY7zlw+ORw4IFMnVCbk1Qz2X7uAlDBA6R2ddhOmN103mlejkMmKZcLATURqqTYWVwgxe+xSh83bWRWg2r2jico8OQ2SylfEZNR0zG7gHESF3cHZFsGy9re67qtZnHu44oHFEiui8uuGe2bt4ZXSE3MQZFWH0xpOi5kmVNpXIQQBDHKJJLu+0Dc7dt+ChRwi5jbMowvDCw+KWKUlILHEuM4MpC4/Oquy+NHX7b1wsIORWTr0I8LEvbpkWK2KIHQcwO4iIya7uvUIahhByB6dehJq+q6G6tKNdiZHx+U1jyzg1QMg9nWIRrDvvO61bmtjcgIOzFWh0bkhEUv3QAp6/iJDbOq0iQA6GFx4kZNezuCrIAd2PJ5DqYLEwvvqCNBIh5D5Oqwhjy09L22YO7sLKpdI4fIk2s7wHZwcIublTKYJt50P79LoyPIlGd1xAPZijNGbWwuwAz1xCyM2dShHGVp4WNpqP9ibqEgo7LVukMQghN3QqReiY2YxNrSRyIFXFlbZZ8KhEhDzCyRfBtvuhpHWaJ44kimDMqu+275LGIITc08kXYXjxYUJOA4XKhlUDgykra7dO3MS7KiDkGU6+CDX910J1aTA7oNF5YVHpXbZt0gCEkNs6+SKkFXdy+GFQhIBAUWGDefTGY9IAhJDbOvkiJOU1M9lKKEJgkKRucG7y1kvSAISQ2zr5Ihiz6hhMx5VU4a+tk2v4KwNCHuTkixCbWkncdoERLOu27zpu0PjVGISQezr5IuhNJfSDQxWDguX913637XwgDUAIua2TL4I2Pp84WjGIpRi98YT0/yKE3NnJFyEhu564I0tgkLRheHFy7RVpAELIbZ18EfLqRkRyPRTBP0CYWd47NP+ANAAh5LZOvgh1g/PqqAwoAp3O0xhy8RBmhDzIyRehZ/ZuTEo5FIFCZXP46saRG7hzESFPcfJFmFx7mVzYBkVwoLBgETGG+xcR8hAnXwTb7oei5gn2wYHMQBOb2zS6TBqDEHJPJ18E0DpxKyqhiChCMCckpah9cO4+aQxCyA2dShHGlp+WtM1w+Goq1XHrZ4U6sazdatt5TxqGEHI3p1IEMHDt94Ss+gCGmEJhBQZJ9KaS4YUHsKAgDUMIuZXTKsL0xpv26XWBVEejO+7sxhNpcqoHp9Zfk4YhhNzKaRXBvrs/fvNFZnkPVxgBRSDu11Dbfx2vp4SQOzutIgDbzoe+K7/qTaXEydEwWVBFplZduGxeeUYaiRByE6dYBEJF10WVNhXmCBAFEB6dVd17ZfI2nuyAkDs69SKM3niSWzsMS4aj2zdoYnOazSv40wNCbujUi2Df+zg0/2dOzaBfgJCIApXKDtOljyw+wp8eEHI3p14EYN1+13/tt9yawUCGhJgmBDDEYVHpMH3A28Yj5FbOogjAsvVu8PofaSWdXEE4EQW6P9+QWtE+vTGz+Q9pMELovJxREYBtd39o/n5yQQvxeyQBotA4cgNvIY+Qmzi7IhAG5+6nFXcGc0J++eVwRyMsH6p7r07c/Mtx0jQuIhA6V2ddBPvex/GbL0raZmg0x7GMgEJlCyTa3JrBkaVH+AMEQufrrIsAbLsfzKvPm8ZWIuPyiCsy0v14PFFEfGZN3dD82PJT0niE0Jk5hyIQrNvvWydupRS2ERdlhJkCi6uKMOTk14/1zt6DFUSXbRtWEyWt00XNEwh5B3g/V/Vcbp9x3x3q51YEQt+V/+VUD8rVCXQ/PoXC8vMXhOkz8upGyjvtcRnVIZEpIkW0QKpDyDuI5NHKiKSYlApYOHfbdyfX3O4eiOdcBDBx62XtwHVFeCLk4BcKC6YMobo0muMeMIe7HhHyPjQaNzq5rNm84m6ThfMvwsW9j7bdD6M3nkA+aXQuzBRgBUH640PI+1CpHE1sbtvUbfIn4ly5QREOTK69iojJPjqoEUAagjkhMNESK2IQ8ho8keboHB9GsMyQWkH6LJwvtynC7Vc6YyFx3jQICBRllveUdVire6/U9F1DyGtUdNnTSrqYLAXxtSdWxrRPr7vP2sEdiwBLLL5Eiz9DIq9k2/kwduOJPMx4sLMsmMVVpZd2j68+Jw07L+5YBJgghOrSzG7zZ4TQybJuv9MlFAYypfBuDwySao0FI0uPSWPOizsWAf6MNLG5eLID8lbW7feGlApi4UCcBzy8+JA05ry4aREiY/PGb2IRkHf6VxECxWE6LMJXsAjId2ARnMMiIN+BRXAOi4B8BxbBOSwC8h1YBOewCMh3YBGcwyIg34FFcA6LgHwHFsE5LALyHVgE57AIyHdgEZzDIiDf8WUR/AOE8rCExtGlntk77gCLgNBZ+7IIVBoH/kdETHZUQpE7wCIgdNa+LAKFwqb5C5n8yGBRFGCJ9IfEX4v+TxJCDAn7Wz4PIG3EQX/+RbDvfbTv7U/c+ktrLMAiIF/wrzkCnRfEj1CntWnzBz4ZdCj4F13h0BeGHYoII1GEYjD6hbGokjH9IfMXxg4HFIEReLiDY4MHWy4YOuci2HY+zGy+nbr99+Dc/QhDdmCQ46pqWATk3b4sAs1PwJbGxFZbTW1LJ+eGM6Txn/2rCPB1bd15P7P5Zur2K/hAji0/GV58CJ/V/qu/9cze7bbvdlq22qdut4zfbBpdbhhaqO2/Xt17paL7UlmHtaR1urBpIr9+NLdmKLuqP6P8QlpJZ0phmymvOSG7Pi6jxpBaGZ1cGpVYpI3Phw+/Wp+h0qaGaJKVEUmKcJMsNJ7BlFKpnDMuAvwnT9z8C/6do5PLgDGrHmYrpDHIp0yuvYR3NfF+AB2WTdKAn/dVEQyxNfak9mV38EtWZV9meU96aXdqcUdyYasprykxp8GYVRefURObVmVIrYA/FL2pxPFJNhZExuVpDDnh0VnweQ7VpakiU5Qa+DwnysOM0tB4iSpOEuIgDokTKWOBUGEQKAx8uYEvM/BkBq4shiuN4UijOZJo9sHKx7GwkRo4sji2LNaPIaWcQxH2x248gf80mJ4EseQSVSxezc3HmVefZ1b0wvsB3occYXj90AJpwM9z6yJwJXqOSMcSRgbzNUG8cAZXDX8N4kUw+RqmIDJYqD3Y4XGwV+Pg08uWxsIHmCOP5yqMXGUCV5nICzHxVUn80BSBOk0YniHSZIkjcyS6PKm+QBZdJDOUyGPLFHEVSmNVSEKNylQXmtQQmtIUltqiTm8Lz+iIyOzSZHfD/4Angj+dcymCWp8Jz0v344uVMfC3pDHIp0ARYHoL7wcKhcXmh/lcEeBDKzeUKuLKHZ/YxBpVUv3RxzUis1OTfSEyt0+bP6ArHIoqGtWXjkeXT8ZUThuqrHE1F+PrZo0NVxKarie2LMAKhLTpH5LQeI2nMtEDROdShJiUcg5fzZdow2OyzCvPSGOQT4Ei5NQMwfuBIwhXqBObx1dJA36eWxcBPswHFk2tX1s69HnHw+GeiaQj7YC80WM43yL0X/lfz6U7oO/Kr1a8P7VvgyL0Xz18P/TO3p1ce0Ua8PPcugikvz8v51UEAC+PZeutZfPA1lv73kfSAORT4Cvh8/th861td5804OdhEZw7xyIgdMawCM5hEZDvwCI4h0VAvgOL4BwWAfkOLIJzWATkO7AIzmERkO/AIjiHRUC+A4vgHBYB+Q4sgnNYBOQ7sAjOYRGQ78AiOIdFQL4Di+AcFgH5DiyCc55eBPveR9vOB8vWO8vWW3i9T+P0GOQ1sAjOeXoRoAXDiw87rdsdMxu9l+/hBAd9BxbBOU8vgnnlWWm7JSQyRaI0qCJT9KbSpPwWV2RW9JW0Tld02U9J5YVL3fadntl7p8fdrkNn2Xw7NP8A/sX6rvw6tPDADS94gUVwztOLMHHrZe3AdSZb6XiN6TwGU8rihbqCL9HKQuMV4YmnRBlh0hkL9aaS0xOfUZNS2H5KUos7Msp7iponoZuuKG6dyqrsj8+sdfyLZdbCPzmNS578JCyCc55eBPgiGpr/Ux2dyWDKKFQ2/FegE0GhsP0ChDxxpEAa5RoddJlO58FjOfyw7KoBN7y4NhbBOU8vArBuv6vtv6ZLKOSLI4M5IS5ishUQEfhPPjUSP38B3Y9/eqg0xxW03QqFwoL/apU2FVZMlq23pFfq3GERnPOCIgCYKUxvvIHla8PwoovKO2xZlX0pRR2nJLmgNVSbRlpKnCwOX330UXQT0KnwmOy6wXnb7gfSa+QOsAjOeUcRCJatd7B2ddH46vORpUfDCw9OycE+trsXLu6dng7LZsvErVPSbF6FD3Zh03h+3ajr6gbnei/fm7j1kvTSuAksgnPeVAR0gux7H6GwY8tPR5ceu25m8x/SdtwKFsE5LALyHVgE57AIyHdgEZzDIiDfgUVwDouAfAcWwTksAvIdWATnsAjId2ARnMMiIN+BRXAOi4B8BxbBOSwC8h1YBOewCMh3YBGcwyIg34FFcM7FIli3302uvRxbeXayYJuW7Xek5wL2vY/TG2/GV1+QxiNPNL76fHr9tX3vG5fAhI/o5Nor0vifN3HrpWXrG+8rLIJzLhbhwsW9rMo+TWzuycos7+mybZOeC8DLWXVhNj6jhjQeeSJDakVZu2Xq9jcuqdR7+V521QBp/M9LL+3umNkkPRfAIjjnYhFqB66rIlMDgyQnK0STXNVzmfRcAL5SErLr+eJI0njkibiC8Ojksm9eFbJxZClUl0Ya//OU4abyThvpuQAWwTkXi1DRfVEk18OYkyWURpW2WUjPBaZu/x2VWMwIlpHGI08UwBCr9RkjS49IrzKo6bsmVsSQxv88vkRb2DROei6ARXDuGEWgUNg0Op8eID4emh8ftkBsyrUisChUDvwbkraD3JvIcdE3CgteQReLQKGwqCf0vsIiHN8xigB/lExBJD80+XiYAi1sgdiUK0WAHPgxpFxlAmk7yJ3Bm8qfqSCuBOliEeAjHcSPIG3HdcFCHc1fSGwKi3B8xyhCIDtUlVSf0DR3PKEpTQxOGLEpV4oALzNHHhdbZSVtB7kzY8MV+JTCVze8gi4WIZClCkmoJm3Hder0Vgb38MKTWITjO0YR4PMcltJM2o7r1OltR6+cK0Wg+wu5CmN8/WXSdpA7S2xZEISl+gX+SBEOvmlI23FdRFZXEC+c2BQW4fiwCOg0uFiEusE5WWg88WbwZ8qVCdWk7bgOi3AysAjoNLhYhJbxmxGGHOLNAB9RgTpdWzCoKxo2VM4YG66aWhdJm/2OHy8CnyWJjq3GIvwbFgGdBheL0Hflf6nFHZSDnyQcr3WACN4bwSKdJKogIrMrpnzK2HiVtOX/4mIRjJl1wRwVjKHSeUG8CH3pOHwEElvmTW03SBs8Y1gELII3c7EItt391sk1/0DRYRQoLAqFTaGyqTQeTBngnSaNLiJt+b+4UgTb7oeyDqskJJZ4LngWoTpNaazW5g0Y66+QNnjGsAjfK8LMxpv00i6uwPECU6icQHZoXO1F0naQO3OxCADebxVdF3kiDZVKvmkdlcYNZKskujxXvg9cKcLFvY9jy0+jEoqoxC1CKSy/QElAsBImCyxxNEceH5JYG1tlJW35bHhYEWr7ryvCE4k/bv8gmcpUR9qO61wpgnX7XU3/dakq7mAYi0bniyOz5YZSeWyZ0lilTmuNr5s1tS6Rtozch+tFgGnC5K2XZR226OQy+PbmCMI5fDXdcbiRY9YA3wf+TLkmpxfeqKSnIHGpCAdKWqeln3ZnfgmmJ7AFWUwJLCVIGz8DHlYEmNrBNJ74g4MFmECdGpnbqysaBtFlE/E/MuNypQj23f3B+T/hGWE+SYwEFBoXnhr+VYP4Gpjp6UvGE5qukzaO3ITrRTjSYdmEj3FG2YX00u6YlArHrOHgACeIgiy62FBpIT0FietFGJy7n98wpoxIYjBlNDoPnuXLu4rDlEERV3H2by0PKwL8IWZW9tFoXOJPDWpKDxQzhVogCE2BDzlEwdTm0pe2K0UgQMuVESY//8MDHEmE4ZlRxWOkjSM34SiCOg3m5PBKBQSKQnVpI4tOikBiym0KYDgeDm82riIhqmiU9BQkrhcBwLK0Y3pDl1AE81BYDsN4JieEOOYacJUJ+hIzafunzcOKAF/aME0QSLWf71BOYUFZD3YCcekBYn5osmMm70IUXC+CZettw8hSZHz+4arv32h+fEVcOWnjyE1AEUSRObDAhFcKlgAiRfTQ/APS6/t9WRV9hzuSKCymIFKbP0B6CpIfKsLFvY+2nQ9T668Pbgv8EjSNrdDpPGKpAk/3M3vKjsfDigAmb79qNq+EaJIh+cSf+2cHe2j4oSnGBufLB9eLAOCl6p291zS2XHVhNq2kS28qkanij/ZL80JMUcVOvjrQuTC1LqpMdcQLDV8b/gyxPqk0Kb8lpbDNRTCr/zRHYDH5Gm1+P+kpSL4sAkcQnlc3QnovfV/P7F3IFt2PBw+HhYPM5d84TornFQFYt9/VDc5lV/bHplZCGjh8dTAnhPhDJKIQkd1tbHDyA/IPFeHQ3sfp9Tf9135rm7qdVzcczFYSswZ4B4Qk1pK2j9xC242Y8imuwnh4PiKFBYt2FlfF5oe5CHJA/PrgYhF0BYMw2yfeVwEQIFMJTDA7LJsuquy+JFbEEG9mf4ZUHJlD2v5p88giEKbXX0NQ4Us7vbQ7ubBNKNfT6I79C1Q6T6zNjamYJj0FCbQ8WKQjXjl44Qsbvzu7+0qXdVusNBDP6B8kl0YVkLaP3Af0OogXcRiF43KxCLHVdqWxmpg/wl/hrRUekx2bVuWiyLg8JltBNMjXi3B0jlpgkCQiJnt89TnpQ/h9CdkNkH/Hy0DlsKWxTvf2RRWNCNRpMB5QaVxTXtPI0qPRpccugvBLVXE0+kHLsQjuDd5dsHYIZIXQ/ATwWh8TnccS62EKQNr41/QlZn+G7MsfDo7Ht4vQNCfR5cNHC/4g6HSeSBHzzatffQcs72H5AA+HVyJYqI0qGiY9BUlsjV1hrDr60/fzFzDZSq4wwkXBXBWdfvhjNRbB3bXdSGyZjy6bkGhz2ZKYYKHuGFiiKFlMidO5J4ivv6xKavRjSI/eXcfj00VIbFlQp7UyuIc7df0DhGFR6casOtJunu+QqxNg2eZ4OJXNFDgvAjyjtmCQKYiEOQXxAsDzwmzNZWwiBwCL4BHgFTdUWaJLx+E7/DhKzbHVtsTmedJmv2ZqXYyvm43I6oZprz9TDpOL42Fw1HJDKWnjp81dimBqWzJUWXkhJpofn/iYwaeOyVIc7eBxCnIAD3F8sF0rAoCWq9PbuPJ4P8dq5fDjfQxYBPS1xOY5XeFQaHKjMqH6eMJSm8/+Nyx3KQIhLLWFLTXAYo/0kfshrhcBQM412d0wmeQqEljiaAZXfQwcedzPHE+NkPtwryKAiKwuiAKswej+IsfcibR3xwXECec/GteEprmY8kmo8jFocnpgOkraIEKeyO2KAIs9WIPpi8dg1sRTJpL27rgCvurlhrIf/4jeMLUuwbMfy6KLh04j5ObcrggObTcSm+fjai9Fl0+S9+64onTcxT1ACCEStywCQuicYBEQQp9hERBCn2EREEKfYREQQp9hERBCn2EREEKfYREQQp9hERBCn2EREEKfYREQQp9hERBCn2EREEKftC//Pze8CL9aoCYGAAAAAElFTkSuQmCC" />
<meta property="og:url" content="https://akarilimano.github.io/malomer.html" />
<meta property="og:title" content="Игра в маломера" />
<meta property="og:description" content="Играем за маломера - по мотивам телеграм-повести Мжирь" />

<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

<title>
    Игра в маломера v1
</title>

<style type="text/css">
canvas {
	cursor: none;
	border: none;
}

body {
	touch-action: none;
	overscroll-behaviour: contain;
	overflow-y: hidden;
	
}

.no_selection {
    user-select: none; /* standard syntax */
    -webkit-user-select: none; /* webkit (safari, chrome) browsers */
    -moz-user-select: none; /* mozilla browsers */
    -khtml-user-select: none; /* webkit (konqueror) browsers */
    -ms-user-select: none; /* IE10+ */
}
</style>

<script>
$(function() {
	let field = {w: 900, h: 650};
	const theCanvas = document.getElementById('paint');
	const resize = () => {
		theCanvas.width = window.innerWidth-50;
		theCanvas.height = window.innerHeight-100;
		field.w = theCanvas.width;
		field.h = theCanvas.height;
		console.debug(field);
	}
	if (screen.width < 600) {
		const vp = document.getElementById('viewport');
		vp.setAttribute('content', 'user-scalable=0, width=600')
	}
	resize();

	let ml = {
		x: 50,
		y: field.h-100,
		w: 200,
		h: 50,
		smooth: 4,
		phSize: 15,
	};
	let angle = {
		x: field.w-200,
		y: 150,
		alpha: 10,
		beta: 65,
		radius: 100
	};  // 0 <= Alpha <= Beta <= 360
	let minimumAngle = 20;
	let angleChange = 10;
	var polarPhi = 0;
	var isAngleCleared = false;
	var isAngleBroken = false;
	var isOnAngle = false;
	var isPaused = false;
	var score = {
		value: 0,
		healingAmount: 10,   // increase score when angle is temporarily healed
		healedAmount: 100,   // increase score when angle is healed and removed
		breakingAmount: 2,  // reduce score when angle is getting broken
		brokenAmount: 10,  // reduce score when angle is too small
		healedNumber: 0,
	};
	score.increaseBy = (value) => score.value += value;
	score.reduceBy = (value) => score.value = Math.max(0, score.value-value);  // Score value cannot be less than 0

	let lang = {
		rus: {
			name: 'Русский',
			shortName: 'rus',
			title: 'Игра в Маломера v1',
			pause: 'Отдыхаем',
			score: 'Очки: ',
			scoreHealed: 'Вылечено углов: ',
			bottmHint: 'Пауза (Пробел)',
		},
		bel: {
			name: 'Беларуская',
			shortName: 'bel',
			title: 'Гульня ў Маламера v1',
			pause: 'Адпачываем',
			score: 'Лік: ',
			scoreHealed: 'Вылечана вуглоў: ',
			bottmHint: 'Паўза (прабел)',
		},
		eng: {
			name: 'English',
			shortName: 'eng',
			title: 'Malomer Game v1',
			pause: 'Chilling',
			score: 'Score: ',
			scoreHealed: 'Angles healed: ',
			bottmHint: 'Pause (Space)',
		},
		jpn: {
			name: '日本語',
			shortName: 'jpn',
			title: 'マロメル・ゲーム・バージョン1',
			pause: '休み',
			score: '点数: ',
			scoreHealed: '治した角数: ',
			bottmHint: '休止（スペースキー ）',
		},
	};

	var currentLang = null;
	let setLang = function(name) {
		currentLang = lang[name];
		$('#pause').text(currentLang.bottmHint);
		document.getElementById('lang').value = name;
		document.title = currentLang.title;
	}
	setLang('rus');

	var current = {x: 400, y: 200};

	var ctx = theCanvas.getContext('2d');

	var canvasOffset = $('#paint').offset();

	let mainColor = '#7592b2';
	let backColor = '#345983';
	var eyeColor = '#00000c';
	ctx.lineWidth = 2;

	let drawMalomer = function(x, y) {
		let timeSeed = Date.now()/400;
		let end = current;
		// body
		ctx.lineWidth = 3;
		ctx.beginPath();
		ctx.strokeStyle = eyeColor;
		ctx.fillStyle = mainColor;
		ctx.moveTo(ml.x, ml.y);
		ctx.lineTo(ml.x, ml.y+ml.h);

		// legs
		ctx.fillStyle = mainColor;
		let legSize = {h: 15, w: 17, thick: 10, footHeight: 6};
		let legs = [
			{x: 0, h: legSize.h, w: legSize.w, thick: legSize.thick, phi: 0},
			{x: 30, h: legSize.h, w: legSize.w, thick: legSize.thick, phi: Math.PI/2},
			{x: 160, h: legSize.h, w: legSize.w, thick: legSize.thick, phi: Math.PI},
			{x: ml.w-legSize.thick, h: legSize.h, w: legSize.w, thick: legSize.thick, phi: Math.PI*3/2}
		];
		legs.forEach(leg => {
			ctx.lineTo(ml.x+leg.x, ml.y+ml.h);
			let length = Math.sin((timeSeed)/2+leg.phi)*2;
			let round = 3;

			ctx.arcTo(ml.x+leg.x, ml.y+ml.h+leg.h+length, ml.x+leg.x+leg.w, ml.y+ml.h+leg.h+length, round);  // p
			ctx.lineTo(ml.x+leg.x+leg.w, ml.y+ml.h+leg.h+length);  // n
			ctx.arcTo(
				ml.x+leg.x+leg.w,
				ml.y+ml.h+leg.h+length - legSize.footHeight,
				ml.x+leg.x+leg.thick,
				ml.y+ml.h+leg.h+length - legSize.footHeight,
				round
			); // tf
			ctx.arcTo(
				ml.x+leg.x+leg.thick,
				ml.y+ml.h+leg.h+length - legSize.footHeight,
				ml.x+leg.x+leg.thick,
				ml.y+ml.h,
				round
			);  // st
			ctx.lineTo(ml.x+leg.x+leg.thick, ml.y+ml.h); // m
		});
		ctx.arcTo(ml.x+ml.w, ml.y, ml.x, ml.y, ml.smooth);
		ctx.arcTo(ml.x, ml.y, ml.x, ml.y+ml.h, ml.smooth);
		ctx.fill();
		ctx.stroke();
		// eyes
		ctx.fillStyle = eyeColor;
		let eyeY = Math.min(ml.y+10+end.y/40, ml.y+ml.h-20);
		ctx.fillRect(ml.x+20-Math.sin((x + timeSeed)/300)*2+end.x/40, eyeY, 3, 3);
		ctx.fillRect(Math.min(ml.x+ml.w-50-Math.sin((x + timeSeed)/300)*2+end.x/20, ml.x+ml.w-10), eyeY, 3, 3);
		// mouth
		let mouth = {
			x: 45,
			w: 100
		};
		let startX = ml.x+mouth.x-Math.sin((x+y)/300)*2+end.x/60;
		let startY = Math.min(ml.y+30+end.y/60, ml.y+ml.h-10);
		let endX = startX+ml.x-mouth.x+mouth.w+Math.cos((x+y)/300+timeSeed)*2;
		if (isAngleCleared) {
			ctx.moveTo(startX, startY-2);
			ctx.arcTo(startX, startY, startX+2, startY, 2);
			ctx.arcTo(endX, startY+1, endX, startY-2, 2);
		} else {
			if (isAngleBroken) {
				ctx.moveTo(startX, startY);
				ctx.lineTo(endX, startY+2);
			} else {
				ctx.moveTo(startX, startY);
				ctx.lineTo(endX, startY-1);
			}
		}
		ctx.stroke();

		// tail
		ctx.lineWidth = 3;
		ctx.fillStyle = mainColor;
		ctx.beginPath();

		ctx.moveTo(ml.x, ml.y);
		let r = Math.random();
		let curv = {x: Math.random()*2+Math.max(Math.abs(ml.x - end.x)/5, 30), y: Math.max(Math.random()*2+Math.abs(ml.y - end.y)/5, 20)};

		let cp1 = {x: ml.x-curv.x, y: ml.y-curv.y};
		let cp2 = {x: end.x-curv.x, y: end.y+curv.y};
		let midreal = {x: (end.x*3/5+ml.x*2/5), y: (end.y*3/5+ml.y*2/5)};
		let mid = {x: midreal.x+Math.max(Math.abs(ml.x - end.x)/5, 15)*Math.cos(timeSeed), y: midreal.y+Math.max(Math.abs(ml.y - end.y)/10, 10)*Math.sin(timeSeed)};

		let middif = {x: (cp1.x-cp2.x)/2, y: (cp1.y-cp2.y)/2};
		let sizeWave = 15;
		let midcp1 = {x: mid.x+Math.sin((mid.x+mid.y)/300)*sizeWave-20, y: mid.y+Math.max(middif.y, middif.y)+Math.cos((mid.x+mid.y)/300)*sizeWave};

		let midcp2 = {x: mid.x-Math.sin((mid.x+mid.y)/300)*sizeWave+20, y: mid.y-Math.max(middif.y, middif.y)-Math.cos((mid.x+mid.y)/300)*sizeWave};

		ctx.bezierCurveTo(cp1.x, cp1.y, midcp1.x, midcp1.y, mid.x, mid.y);
		ctx.bezierCurveTo(midcp2.x, midcp2.y, cp2.x, cp2.y, end.x, end.y);
		// tail end
		ctx.lineTo(end.x+12, end.y-8);
		ctx.moveTo(end.x, end.y);
		ctx.lineTo(end.x+7, end.y+3);
		ctx.stroke();
	};

	let drawAngle = function() {
		if (isAngleCleared || isPaused) {
				return;
		}
		ctx.strokeStyle = eyeColor;
		ctx.fillStyle = eyeColor;
		ctx.moveTo(angle.x, angle.y);
		ctx.lineTo(angle.x+angle.radius*Math.cos(Math.PI*angle.alpha/180), angle.y-angle.radius*Math.sin(Math.PI*angle.alpha/180));

		ctx.moveTo(angle.x, angle.y);
		ctx.lineTo(angle.x+angle.radius*Math.cos(Math.PI*angle.beta/180), angle.y-angle.radius*Math.sin(Math.PI*angle.beta/180));

		ctx.stroke();
				
		if (isOnAngle) {
			ctx.fillStyle = 'rgba(255, 255, 0, 0.25)';
			ctx.beginPath();
			ctx.ellipse(angle.x, angle.y, angle.radius/10, angle.radius/10, Math.PI*180/180, Math.PI*(180-angle.alpha)/180, Math.PI*(180-angle.beta)/180, true);
			ctx.fill();
			ctx.beginPath();
			ctx.ellipse(angle.x, angle.y, angle.radius/10, angle.radius/10, 0, 0, Math.PI*2);
			ctx.fill();
		}
	};

	let drawScene = function() {
		ctx.clearRect(0, 0, field.w, field.h);
		// draw background
		ctx.fillStyle = mainColor;
		ctx.fillRect(0, 0, field.w, field.h);
		ctx.fillStyle = backColor;
		ctx.beginPath();
		ctx.moveTo(0, field.h-80);
		ctx.bezierCurveTo(field.w/3, field.h-100, field.w*2/3, field.h-50, field.w, field.h-80);
		ctx.lineTo(field.w, field.h);
		ctx.lineTo(0, field.h);
		ctx.stroke();
		ctx.fill();

		// draw actors
		drawMalomer(current.x, current.y);
		drawAngle();

		// show info
		showText();
	};
	
	let showText = function() {
		ctx.font = '32px monospace';
		ctx.save();
		ctx.fillStyle = eyeColor;
		ctx.fillStyle = 'yellow';
		ctx.fillText(currentLang.score + String(score.value).padStart(10, '0'), 10, 40);
		ctx.fillText(currentLang.scoreHealed + score.healedNumber, 10, 80);		
		
		if (isPaused) {
			ctx.font = '48px monospace';
			ctx.fillStyle = 'yellow';
			ctx.fillText(currentLang.pause, (field.w-210)/2, (field.h-30)/2);
		}
	}

	let checkAngle = function() {
		if (isAngleCleared) {
			// console.debug("Checked, angle was already cleared.");
			return;
		}
		isOnAngle = false;
		let dx = current.x-angle.x;
		let dy = current.y-angle.y;
		let polarR = Math.sqrt(dx*dx + dy*dy);
		if (polarR <= ml.phSize) {
			// Check the mouse is 'inside' of an angle is broken, so just use a small area around
			isOnAngle = true;
		}
		return;
	}

	let healAngle = function() {
		score.increaseBy(score.healingAmount);
		angle = {
			...angle,
			alpha: (angle.alpha - angleChange + 360) % 360,
			beta: (angle.beta + angleChange + 360) % 360
		};
		
		if (Math.abs(angle.alpha - angle.beta) % 360 <= 10) {
			isAngleCleared = true;
			score.healedNumber += 1;
			score.increaseBy(score.healedAmount);
			isOnAngle = false;
			setTimeout(makeNewAngle, 2000);
		}
	}
	
	let breakAngle = function() {
		if (isAngleCleared) {
			return;
		}
		if (Math.abs(angle.alpha - angle.beta) < minimumAngle + 5 && angle.alpha < angle.beta){
			// Angle is too small, lose points
			// console.debug(angle.alpha, angle.beta);
			score.reduceBy(score.brokenAmount);
			isAngleBroken = true;
			return;
		}
		angle.alpha += 1;
		angle.beta -= 1;
		isAngleBroken = false;
		
		score.reduceBy(score.breakingAmount);
	}

	let makeNewAngle = function() {		
		if (isPaused) {
			// cancel new angle if it is a pause
			return;
		}

		let newX = Math.random()*(field.w - 150)+100;
		let newY = Math.random()*(field.h - 250)+100;
		let newAlpha = Math.random()*(360 - minimumAngle);  // 0-335; [a-25-1; a+25+1]
		let angleDiff = Math.random()*(360 - 2*(minimumAngle + 5)) + minimumAngle + 5;
		let newBeta = (newAlpha + angleDiff + 360) % 360;
		let newRadius = Math.random()*40+90;
		angle = {
			...angle,
			x: newX,
			y: newY,
			alpha: Math.min(newAlpha, newBeta),
			beta: Math.max(newAlpha, newBeta),
			radius: newRadius,
		}
		isAngleCleared = false;
		console.debug(angle);
	}

	let handlePause = function() {
		isPaused = !isPaused;

		// To avoid pause expoiting clear the angle before the pause and make new angle after it
		isAngleCleared = true;
		isOnAngle = false;
		if (!isPaused) {
			setTimeout(makeNewAngle, 2000);
		}
	}

	setInterval(() => {
		if (!isPaused) {
			breakAngle();
		}
		checkAngle();
		drawScene();
	}, 80);

	$('#paint').mousemove(function(e) {
		current = {x: e.pageX - canvasOffset.left, y: e.pageY - canvasOffset.top};
	});

	$('#paint').click(function(e) {
		if (isPaused) {
			return;
		}
		if (isOnAngle) {
			healAngle();
		}
	});

	$('#pause').click(function(e) {
		handlePause();
	});
	
	$('#lang').on('change', function() {
		setLang(this.value);
	});

	document.body.onkeyup = function(e) {
		// console.debug(e.key, e.code, e.keyCode);
		if (e.key == " " ||
			e.code == "Space" ||      
			e.keyCode == 32      
		) {
			handlePause();
		}
	}

	window.addEventListener('resize', resize);
	window.addEventListener('touchmove', function(e) {
		let touches = e.changedTouches[0];
		// console.debug(touches);
		current = {x: touches.pageX - canvasOffset.left, y: touches.pageY - canvasOffset.top};
	});

});
</script>

</head>

<body>

	<canvas id="paint"></canvas>
	<div class="no_selection">
		<div>
			<span>Language / Язык:</span>
			<select id="lang">
				<option value="rus">Русский</option>
				<option value="bel">Беларуская</option>
				<option value="eng">English</option>
				<option value="jpn">日本語</option>
			</select>
			<button id="pause">Pause (Space)</button>
		</div>
		<div><b>Inspired by <a href="https://t.me/mjjir" target="_blank">Мжирь</a></b></div>
		<div>Report problems to <a href="https://github.com/akarilimano/akarilimano.github.io/issues" target="_blank">GitHub</a></div>
	</div>

</body></html>
